!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){var n,o;o=this,void 0===(n=function(){return o.returnExportsGlobal=function(){var t={},e=t.Graph=function(){this.nodeSet={},this.nodes=[],this.edges=[],this.adjacency={},this.nextNodeId=0,this.nextEdgeId=0,this.eventListeners=[]},i=t.Node=function(t,e){this.id=t,this.data=void 0!==e?e:{}},n=t.Edge=function(t,e,i,n){this.id=t,this.source=e,this.target=i,this.data=void 0!==n?n:{}};e.prototype.addNode=function(t){return t.id in this.nodeSet||this.nodes.push(t),this.nodeSet[t.id]=t,this.notify(),t},e.prototype.addNodes=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],n=new i(e,{label:e});this.addNode(n)}},e.prototype.addEdge=function(t){var e=!1;return this.edges.forEach(function(i){t.id===i.id&&(e=!0)}),e||this.edges.push(t),t.source.id in this.adjacency||(this.adjacency[t.source.id]={}),t.target.id in this.adjacency[t.source.id]||(this.adjacency[t.source.id][t.target.id]=[]),e=!1,this.adjacency[t.source.id][t.target.id].forEach(function(i){t.id===i.id&&(e=!0)}),e||this.adjacency[t.source.id][t.target.id].push(t),this.notify(),t},e.prototype.addEdges=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],i=this.nodeSet[e[0]];if(null==i)throw new TypeError("invalid node name: "+e[0]);var n=this.nodeSet[e[1]];if(null==n)throw new TypeError("invalid node name: "+e[1]);var o=e[2];this.newEdge(i,n,o)}},e.prototype.newNode=function(t){var e=new i(this.nextNodeId++,t);return this.addNode(e),e},e.prototype.newEdge=function(t,e,i){var o=new n(this.nextEdgeId++,t,e,i);return this.addEdge(o),o},e.prototype.loadJSON=function(t){("string"==typeof t||t instanceof String)&&(t=JSON.parse(t)),("nodes"in t||"edges"in t)&&(this.addNodes.apply(this,t.nodes),this.addEdges.apply(this,t.edges))},e.prototype.getEdges=function(t,e){return t.id in this.adjacency&&e.id in this.adjacency[t.id]?this.adjacency[t.id][e.id]:[]},e.prototype.removeNode=function(t){t.id in this.nodeSet&&delete this.nodeSet[t.id];for(var e=this.nodes.length-1;e>=0;e--)this.nodes[e].id===t.id&&this.nodes.splice(e,1);this.detachNode(t)},e.prototype.detachNode=function(t){var e=this.edges.slice();e.forEach(function(e){e.source.id!==t.id&&e.target.id!==t.id||this.removeEdge(e)},this),this.notify()},e.prototype.removeEdge=function(t){for(var e=this.edges.length-1;e>=0;e--)this.edges[e].id===t.id&&this.edges.splice(e,1);for(var i in this.adjacency){for(var n in this.adjacency[i]){for(var o=this.adjacency[i][n],r=o.length-1;r>=0;r--)this.adjacency[i][n][r].id===t.id&&this.adjacency[i][n].splice(r,1);0==this.adjacency[i][n].length&&delete this.adjacency[i][n]}c(this.adjacency[i])&&delete this.adjacency[i]}this.notify()},e.prototype.merge=function(t){var e=[];t.nodes.forEach(function(t){e.push(this.addNode(new i(t.id,t.data)))},this),t.edges.forEach(function(t){var i=e[t.from],o=e[t.to],r=t.directed?r=t.type+"-"+i.id+"-"+o.id:i.id<o.id?t.type+"-"+i.id+"-"+o.id:t.type+"-"+o.id+"-"+i.id,a=this.addEdge(new n(r,i,o,t.data));a.data.type=t.type},this)},e.prototype.filterNodes=function(t){var e=this.nodes.slice();e.forEach(function(e){t(e)||this.removeNode(e)},this)},e.prototype.filterEdges=function(t){var e=this.edges.slice();e.forEach(function(e){t(e)||this.removeEdge(e)},this)},e.prototype.addGraphListener=function(t){this.eventListeners.push(t)},e.prototype.notify=function(){this.eventListeners.forEach(function(t){t.graphChanged()})};var o,r,a=t.Layout={};a.ForceDirected=function(t,e,i,n,o,r){this.graph=t,this.stiffness=e,this.repulsion=i,this.damping=n,this.minEnergyThreshold=o||.01,this.maxSpeed=r||1/0,this.nodePoints={},this.edgeSprings={}},a.ForceDirected.prototype.point=function(t){if(!(t.id in this.nodePoints)){var e=void 0!==t.data.mass?t.data.mass:1;this.nodePoints[t.id]=new a.ForceDirected.Point(s.random(),e)}return this.nodePoints[t.id]},a.ForceDirected.prototype.spring=function(t){if(!(t.id in this.edgeSprings)){var e=void 0!==t.data.length?t.data.length:1,i=!1,n=this.graph.getEdges(t.source,t.target);if(n.forEach(function(t){!1===i&&t.id in this.edgeSprings&&(i=this.edgeSprings[t.id])},this),!1!==i)return new a.ForceDirected.Spring(i.point1,i.point2,0,0);if(this.graph.getEdges(t.target,t.source),n.forEach(function(t){!1===i&&t.id in this.edgeSprings&&(i=this.edgeSprings[t.id])},this),!1!==i)return new a.ForceDirected.Spring(i.point2,i.point1,0,0);this.edgeSprings[t.id]=new a.ForceDirected.Spring(this.point(t.source),this.point(t.target),e,this.stiffness)}return this.edgeSprings[t.id]},a.ForceDirected.prototype.eachNode=function(t){var e=this;this.graph.nodes.forEach(function(i){t.call(e,i,e.point(i))})},a.ForceDirected.prototype.eachEdge=function(t){var e=this;this.graph.edges.forEach(function(i){t.call(e,i,e.spring(i))})},a.ForceDirected.prototype.eachSpring=function(t){var e=this;this.graph.edges.forEach(function(i){t.call(e,e.spring(i))})},a.ForceDirected.prototype.applyCoulombsLaw=function(){this.eachNode(function(t,e){this.eachNode(function(t,i){if(e!==i){var n=e.p.subtract(i.p),o=n.magnitude()+.1,r=n.normalise();e.applyForce(r.multiply(this.repulsion).divide(o*o*.5)),i.applyForce(r.multiply(this.repulsion).divide(o*o*-.5))}})})},a.ForceDirected.prototype.applyHookesLaw=function(){this.eachSpring(function(t){var e=t.point2.p.subtract(t.point1.p),i=t.length-e.magnitude(),n=e.normalise();t.point1.applyForce(n.multiply(t.k*i*-.5)),t.point2.applyForce(n.multiply(t.k*i*.5))})},a.ForceDirected.prototype.attractToCentre=function(){this.eachNode(function(t,e){var i=e.p.multiply(-1);e.applyForce(i.multiply(this.repulsion/50))})},a.ForceDirected.prototype.updateVelocity=function(t){this.eachNode(function(e,i){i.v=i.v.add(i.a.multiply(t)).multiply(this.damping),i.v.magnitude()>this.maxSpeed&&(i.v=i.v.normalise().multiply(this.maxSpeed)),i.a=new s(0,0)})},a.ForceDirected.prototype.updatePosition=function(t){this.eachNode(function(e,i){i.p=i.p.add(i.v.multiply(t))})},a.ForceDirected.prototype.totalEnergy=function(t){var e=0;return this.eachNode(function(t,i){var n=i.v.magnitude();e+=.5*i.m*n*n}),e},t.requestAnimationFrame=(o=this.requestAnimationFrame||this.webkitRequestAnimationFrame||this.mozRequestAnimationFrame||this.oRequestAnimationFrame||this.msRequestAnimationFrame||function(t,e){this.setTimeout(t,10)},r=this,function(){return o.apply(r,arguments)}),a.ForceDirected.prototype.start=function(e,i,n){var o=this;this._started||(this._started=!0,this._stop=!1,void 0!==n&&n(),t.requestAnimationFrame(function n(){o.tick(.03),void 0!==e&&e(),o._stop||o.totalEnergy()<o.minEnergyThreshold?(o._started=!1,void 0!==i&&i()):t.requestAnimationFrame(n)}))},a.ForceDirected.prototype.stop=function(){this._stop=!0},a.ForceDirected.prototype.tick=function(t){this.applyCoulombsLaw(),this.applyHookesLaw(),this.attractToCentre(),this.updateVelocity(t),this.updatePosition(t)},a.ForceDirected.prototype.nearest=function(t){var e={node:null,point:null,distance:null},i=this;return this.graph.nodes.forEach(function(n){var o=i.point(n),r=o.p.subtract(t).magnitude();(null===e.distance||r<e.distance)&&(e={node:n,point:o,distance:r})}),e},a.ForceDirected.prototype.getBoundingBox=function(){var t=new s(-2,-2),e=new s(2,2);this.eachNode(function(i,n){n.p.x<t.x&&(t.x=n.p.x),n.p.y<t.y&&(t.y=n.p.y),n.p.x>e.x&&(e.x=n.p.x),n.p.y>e.y&&(e.y=n.p.y)});var i=e.subtract(t).multiply(.07);return{bottomleft:t.subtract(i),topright:e.add(i)}};var s=t.Vector=function(t,e){this.x=t,this.y=e};s.random=function(){return new s(10*(Math.random()-.5),10*(Math.random()-.5))},s.prototype.add=function(t){return new s(this.x+t.x,this.y+t.y)},s.prototype.subtract=function(t){return new s(this.x-t.x,this.y-t.y)},s.prototype.multiply=function(t){return new s(this.x*t,this.y*t)},s.prototype.divide=function(t){return new s(this.x/t||0,this.y/t||0)},s.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.normal=function(){return new s(-this.y,this.x)},s.prototype.normalise=function(){return this.divide(this.magnitude())},a.ForceDirected.Point=function(t,e){this.p=t,this.m=e,this.v=new s(0,0),this.a=new s(0,0)},a.ForceDirected.Point.prototype.applyForce=function(t){this.a=this.a.add(t.divide(this.m))},a.ForceDirected.Spring=function(t,e,i,n){this.point1=t,this.point2=e,this.length=i,this.k=n};var d=t.Renderer=function(t,e,i,n,o,r,a){this.layout=t,this.clear=e,this.drawEdge=i,this.drawNode=n,this.onRenderStop=o,this.onRenderStart=r,this.onRenderFrame=a,this.layout.graph.addGraphListener(this)};d.prototype.graphChanged=function(t){this.start()},d.prototype.start=function(t){var e=this;this.layout.start(function(){e.clear(),e.layout.eachEdge(function(t,i){e.drawEdge(t,i.point1.p,i.point2.p)}),e.layout.eachNode(function(t,i){e.drawNode(t,i.p)}),void 0!==e.onRenderFrame&&e.onRenderFrame()},this.onRenderStop,this.onRenderStart)},d.prototype.stop=function(){this.layout.stop()},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var i,n;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),r=o.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(i=e),n=0;n<r;){var a;n in o&&(a=o[n],t.call(i,a,n,o)),n++}});var c=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};return t}()}.call(e,i,e,t))||(t.exports=n)},function(t,e,i){"use strict";i.r(e);var n=document.getElementsByTagName("canvas")[0],o=n.getContext("2d");const r={xmin:0,xmax:0,ymin:0,ymax:0},a=(t,e,i,n)=>1*e*(t-i)/n,s=t=>a(t,n.height,r.ymin,(()=>r.ymax-r.ymin)()),d=t=>a(t,n.width,r.xmin,(()=>r.xmax-r.xmin)());function c(t,e=10,i=!1){o.beginPath(),o.arc(d(t.x),s(t.y),e,0,2*Math.PI),o.fillStyle=i?"orange":"white",o.fill(),o.stroke()}const h=i(0);let p=[];document.getElementsByTagName("canvas")[0];var u=new h.Graph,l=u.newNode({label:"Norway Spruce"}),f=u.newNode({label:"Sicilian Fir"}),y=u.newNode({label:"Sicilian Fir2"}),g=u.newNode({label:"Sicilian Fir3"}),m=u.newNode({label:"Sicilian Fir4"});u.newEdge(l,f),u.newEdge(f,f),u.newEdge(y,f),u.newEdge(g,f),u.newEdge(m,f),u.newEdge(y,g),u.newEdge(m,y),console.log(f),p=[l,f,y,g,m];var v=new h.Layout.ForceDirected(u,400,400,.5),w=new h.Renderer(v,function(){o.fillStyle="grey",o.clearRect(0,0,n.width,n.height),o.rect(0,0,n.width,n.height)},function(t,e,i){var n,r;n=e,r=i,o.moveTo(d(n.x),s(n.y)),o.lineTo(d(r.x),s(r.y)),o.stroke()},function(t,e){var i;i=e,r.xmin=Math.min(i.x,r.xmin),r.xmax=Math.max(i.x,r.xmax),r.ymin=Math.min(i.y,r.ymin),r.ymax=Math.max(i.y,r.ymax),c(e),function(t,e){o.font="11px serif",o.fillStyle="black",console.log(o.measureText(t).width),o.fillText(t,d(e.x)-.5*o.measureText(t).width,s(e.y))}(t.data.label,e)});w.start()}]);
//# sourceMappingURL=main.js.map